## 1.Linux进程管理
对于Linux用户来说监视系统进程的运行情况并适时终止一些时空的进程是每天的例行事务

进程：正在执行的程序或命令，每个进程都是一个运行的实体，都有自己的地址空间，并占用一定的系统资源。程序是人使用计算机语言编写的可以实现特定目标或解决特定问题的代码集合

父进程 子进程 PID

进程注入：攻击者将木马 注入到正常进程里&#x20;

ps 报告当前系统进程状态

ps -l 采用详细格式显示程序状况 将目前属于你这次的登入的PID与相关信息展示出来

ps -le 查看进程详细信息  所有进程

ps anx 列举所有在占内存的程序

F  代表进程标志  1 说明进程可以被复制但是不能被执行 4 说明进程正在使用超级用户权限  5  =4+1 以上都有

标准用户空间新程序启动通常两步走：

1. 父进程 `fork()` —— kernel 复制父进程（得到子进程，子和父短时间内几乎一模一样）
2. 子进程马上 `execve()` —— 用新程序镜像替换自己（例如 `ls`, `python` 等），完成真正的“运行新程序”

如果子进程**还没执行 exec**（可能只是短时间窗口，也可能设计就是不 exec），那么 ps/内核会把那个“历史位”记下来，`ps` 将它反映为 `F` 的最低位（即 1）。

S 进程状态   STAT  S=睡眠 R=运行

UID 运行进程的用户ID

PID 进程的ID

PPID 父进程ID

C 这个进程cpu的使用率

PRI （PR）进程优先级  内核实际调度值 数字越小优先级越高

NI 进程优先级  用户意愿 &#x20;

ADDR 该进程在内存中的位置

SZ  占用内存大小

WCHAN 是否在运行   -  表示正在运行

TTY  这个进程由哪个终端产生

TIME 占用CPU的运算时间

CMD 产生此进程的命令名&#x20;

查找指定进程

ps -ef | grep 进程关键字

例：ps -ef | grep php 查找php进程

ps -u 用户名 查找与用户有关的进程

kill  用于删除执行中的程序或工作

kill -9 PID  强制终止该PID进程

PID不固定 随机产生

kill -9 $（ps -ef | grep 用户名） 定位该用户产生的进程并停止

通过$()将ps -ef | grep 用户名 产生的结果封装为一个参数，通过 kill -9 来使用

kill -u 用户名  杀死指定用户的进程

## 2.Linux定时任务
crontab

-e：编辑该用户的计时器设置；

LInux任务调度：

系统任务调度：	系统周期想要执行的任务，写数据到硬盘、日志清理等等

定时任务：/etc/crontab &#x20;

#（井号在前面）注释信息，系统不执行

SHELL=/bin/bash  	系统要使用哪个shell（终端）

PATH=/sbin:/bin:/usr/sbin:/usr/bin 		指定系统执行命令的路径

MAILTO=root		指定定时任务执行信息将通过电子邮件发送给root用户

&#x20;

用户任务调度：	用户定期要执行的工作、用户数据备份、定时邮箱提醒&#x20;

定时任务：/var/spool/cron

一般设置定时任务通过系统调度编辑/etc/crontab来实现

vi /etc/crontab

* * * * * user-name  command to be executed	&#x9;

第一个*表示分钟 0-59

第二个*表示小时 0-23

第三个*表示日期 1-31

第四个*表示月份 1-12

第五个*表示星期几 0-7  0/7均表示周日

user-name command to be executed  表示要执行的命令或脚本

每一个时间字段还可以通过特殊符号类进行设置

* ：代表任何时间段，例如第一个*代表一个小时中每分钟都要执行

，：代表不连续的时间，0 8,12,16  * * *  代表每天的8，12，16点整分别执行一次

-：代表连续的时间 0 5 * * 1-6 代表周一到周六五点整执行一次

/ ：代表每过多久执行一次 /10     **** 代表每天每隔10min执行一次

## 3.Linux相关日志
/var/log/cron 记录系统定时任务相关日志

/var/log/cups 记录打印信息日志

## 4.安全加固
**口令锁定**：设置口令认证失败后的锁定策略，出错次数达到阈值锁定，防暴力破解

/etc/pam.d/system-auth 文件中进行修改

vi /etc/pam.d/system- auth 进入vi 输入i进行编辑

在第一行进行修改

auth required pam__tally2.so onerr=fail deny=5 unlock_____time=600 root_____unlock_____time=600_

输入密码错误达到5次锁定用户600秒

pam_tally2 -r -u 用户名  可在root用户快速强制解锁该用户

**设置密码复杂度**

/etc/security/pwquality.conf 文件编辑进行修改   初始配置文件全篇# 去掉后下面修改生效

minlen = 8  口令长度至少8位（包含字母、数字、特殊字符总长度）

dcredit = -1 口令至少包含1个数字   -表示至少  一般不会用正数 正数表明上限

ucredit = -1 口令至少包含1个大写字母

lcredit = -1 口令至少包含包含1个小写字母

ocredit = -1 口令至少包含1个特殊字符（非数字字母）

`maxrepeat`：密码中同一字符连续出现的最大次数（如 `maxrepeat=3` 表示禁止 `aaaa` 这类连续 4 个相同字符）。

**设置密码的有效期**

/etc/login.defs &#x20;

修改 `/etc/login.defs` 更改的是系统默认值；已存在用户的到期日期不会自动更新，需用 `chage` 修改或等待用户自行更改密码后生效。

PASS__MAX_____DAYS 180	密码的最大有效期（天），过期后必须修改 默认值999999即为永久_

PASS_MIN_DAYS 0 是否可以修改密码，多少天后可修改，0表示随时可修改

PASS__MIN___LEN 8	密码的最小长度，pam__pwquality（即上文minlen）设置优先

PASS_WAR_AGE 15	密码失效前多少天在用户登录时通知用户修改密码

**删除无关账户**

创建的用户在/etc/passwd  查找时UID从1000开始

**禁止存在空密码账号**

当今一般密码内用加密后保存在/etc/shadow中 空口令用户易被恶意利用

awk -F: 'length($2)==0 {print $1}' /etc/shadow  该命令可用于查找空口令用户

**禁止wheel组以外的用户使用 su root**

/etc/pam.d/su  修改或添加配置文件的条目

auth	sufficient	pam_**rootok.so	auth	required	pam**_wheel.so	group=wheel

或

auth	required	pam_wheel.so	ues_uid

**限制root用户ssh远程登录**

/etc/ssh/sshd_config

PermitRootLogin no

**一键安全加固脚本使用**

./Linux\ security.sh  运行/下面的Linux security.sh

\转义字符

