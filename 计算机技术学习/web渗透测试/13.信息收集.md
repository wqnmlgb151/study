## 1.简介
**渗透的本质就是信息收集**	信息收集的深度直接关系渗透测试的成败	无论多牛的黑客前期都是需要信息收集的

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1756647377058-b231c210-89fa-4c9e-923a-9847e14474ac.png)

信息收集 漏洞发现 漏洞利用

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1756647434452-21c18aea-14fc-4ae0-b3c4-8865e8935b05.png)

知己知彼，百战不殆

## 2.企业信息收集
SRC：安全应急响应中心

发现并提交漏洞在SRC平台

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1756648866024-6bea62b5-86ce-4c30-8d52-7bacbaf082df.png)

企业目标总体信息收集：

公司规模、公司网址、app、公众号

爱企查：[https://aiqicha.baidu.com/](https://aiqicha.baidu.com/)

小蓝本：[https://www.xiaolanben.com/](https://www.xiaolanben.com/)



目标：慕课网

公司：北京奥鹏文化传媒有限公司

网站：www.imooc.com

注意测试范围需要额外注意



目标：北京七麦科技股份有限公司

公司：北京七麦科技股份有限公司

网站：查到的都是

app：七麦数据



## 3.域名收集
单（主）域名收集：

备案信息：搜索网址[https://www.beianx.cn/](https://www.beianx.cn/)	相同备案号是同一家公司均属同样范围企业产权：

域名注册：相同域名



子域名搜集：

示例：

一级域名：baidu.com

二级域名：tieba.baidu.com

子域名中有主域名

DNS数据：

可能几个域名指向一个ip，可查看有多少域名指向该ip，查子域名

证书查询：https  网站使用同一个证书，亦是子域名  crt.sh

网络空间搜索引擎：谷歌等高级搜索语法



枚举解析

子域名搜集工具oneforall  github在线下载

[OneForAll-0.4.5.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1756723996113-f03a464b-47c8-4bbc-9632-8d92bd0f64e0.zip)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1756724771782-df4e59f0-1ef4-4466-951b-86303a3fcaf0.png)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1756724897305-96b37caf-7a73-4b87-8bbc-034dbaec181c.png)

python oneforall.py --target 域名 run  在相应文件夹打开cmd输入命令

在result目录中查看结果   .csv文件后缀，表格打开

或者在文件根目录（跟oneforall.[y在同一目录）创建.txt文件放入多个域名

python oneforall.py --targets  .txt run 



## 4.web架构资产收集（Web指纹）
web指纹：

中间件

程序语言    （PHP搭建的网站是无法识别java的病毒的）

框架

CMS

操作系统



CMS  建站模板	可能存在通杀漏洞

通杀漏洞 即模板存在的漏洞，可通杀所有使用该模板搭建的网站



浏览器插件： Wappalyzer

在目标网站点击插件查看信息

工具：棱洞 EHole

[EHole_windows_amd64.exe.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1756986426564-c6d61c87-bfa3-4152-ab85-57db62990f58.zip)

在目录开启 cmd

输入命令  通过 -h查看并使用相关命令



## 5.CDN检测与绕过
识别

绕过

并不是所有的网站都有CDN



CDN类型

传统：访问域名--》解析IP--》访问目标

普通：访问域名--》CDN节点--》真实IP--》访问目标

带有waf的：访问域名--》CDN节点（带有waf）--》真实IP--》访问目标



加速类型：

区域加速：

只部署在国内  CDN

国外			真实IP

只部署在国外与上述相反

域名加速：

主域名	

部署加速的话 访问时会分到就近的CDN节点，无法获得真实IP

子域名	部署哪个，访问时进入CDN，其他的不然，为真实IP



识别：

多地ping	通过从多个地方ping来查看ip是否一致来判断是否使用CDN 简单直接真实有效	如果一致就没部署

[https://ping.chinaz.com/](https://ping.chinaz.com/)

任何绕过方式都不是百分百准确，要多方面佐证

绕过：

多地/国外ping

历史遗留文件

历史DNS解析	部分网站一开始没有部署CDN，此时DNS为真实IP 后续部署后DNS为CDN节点

邮件系统 无法部署CDN服务 CDN是用来进行静态资源部署的 让目标网站给发送邮件来获取真实ip	显示邮件原文源代码来查看ip（发件人需要是当前域名邮件用户名）

RSS订阅

邮箱注册、激活

找回密码

产品更新推荐

通过漏洞获取



[https://viewdns.info/iphistory/?domain=](https://viewdns.info/iphistory/?domain=)

[https://securitytrails.com/](https://securitytrails.com/)

[https://dnsdumpster.com/](https://dnsdumpster.com/)

参考文章：[https://www.wangan.com/p/7fy7f6d0b4d1aeaf](https://www.wangan.com/p/7fy7f6d0b4d1aeaf)

## 6.端口扫描
[常见端口测试方法.docx](https://www.yuque.com/attachments/yuque/0/2025/docx/59258918/1757586478281-7d1df7fa-e58a-4a14-ba18-e50eae26889f.docx)

nmap	python	适用于单个

close open filered（有可能）

masscan	C语言	批量端口扫描 速度快

[masscan.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1757588187162-bb9e1763-a395-4c86-89d3-ed843d247705.zip)[nmap-7.93-setup.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1757588242760-19c51c1a-03b1-46d9-a2f9-eafd8c84e0e9.zip)



## 7.源码收集
拿到源码后可进行白盒审计



开源CMS		建站模板	z-blog	在官网直接下载

git源码泄露	开发使用idea/git等工具时会遗留.idea/.git目录文件  通过工具可爬取	可获取大概目录非全部文件源码

[GitHack-master.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1757589109536-b54dca03-002d-4094-ace8-d7c07914dce6.zip)

svn源码泄露	通过工具可爬取	可获取大概目录非全部文件源码

[SvnHack-master.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1757589109514-2c93965f-a28b-4bb4-ab4e-ed0b73942324.zip)

ds_store	mac系统  泄露可直接交洞	

[ds_store_exp-master.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1757589109494-1f2a0dbd-cef8-4200-9e70-44e68cb88d19.zip)



github	可在进行搜索，查找源码

## 8.目录扫描
![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1757590671408-db743f10-989a-42e5-a145-5c7757da5787.png)

备份文件	zip rar 7z tar gz .txt .old .temp

[御剑后台扫描珍藏版.rar](https://www.yuque.com/attachments/yuque/0/2025/rar/59258918/1757590881401-ab1861d1-64ca-4211-8458-dd487e32abf7.rar)

君子协议：告诉网站爬虫不允许爬该目录		文件robot.txt

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1757591935699-f7ded638-2e0f-4847-87ba-d8eaa9ee66c8.png)



## 9.WAF识别（网站应用级入侵防御系统）
云WAF：	阿里云盾	长亭雷池	华为云	防护最强

硬件		绿盟		安恒		深信服	

软件		安全狗	d盾		宝塔

代码级WAF	自己写的WAF规则	防护最差 一般写死在代码里面



waf绕过	主要针对于软件层面 



看图识别	访问时直接遇见的页面

项目识别	使用工具wafw00f（kali集成）	identywaf

wafw00f	ip（域名）	

主域防护一定高于子域



## 10.框架组件识别
py	php	Java

框架：简单代码的整合库	集合较多功能	可直接调用

通过Wappalyzer插件识别	通过请求/响应包

python：Django	

flask

PHP：   ThinkPHP	也可以 CMS源码体系 ico哈希值

Laraverl

Yii	只能响应包

JAVA：  fastjson/jackson		

提供Java对象和json数据之间转换

基于报错回显判断  在请求包里将json格式数据最下面的}删掉，根据相应包的爆错判断

黑盒识别	在请求包json格式文件中通过发送0/1观察响应包转换的1/0来判断 0/1转换

shiro				

安全框架，执行身份验证、授权、密码和会话管理

插件识别为JAVA，且直接是登陆页面，大概率是

响应头字段

struts2

web应用框架

URL后缀	do action

sptingboot

快速构建基于spring框架的java应用的开源框架

ico哈希值

报错界面

soir

搜索服务器

开放端口 8983默认

ico哈希值

log4j/log4j2

做日志记录工具

无明显特征

识别框架  可通杀

## 11.Google语法
谷歌黑客数据库：[https://www.exploit-db.com/](https://www.exploit-db.com/)![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1757838387298-c8c5b51c-3a36-4483-95dd-06ea743f2525.png)

intitle：	常用于搜索文件及后台登陆管理

inurl：	寻找网站后台登陆地址及搜索特殊URL	部分特定漏洞URL栏会有特定数据

intext：	用于寻找含特定模板（默认界面含有一定关键字）的网站

filetype：	用于搜索指定文件

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1758191341038-ac32b0da-13c5-4ca0-a6ca-1c58e244c0a6.png)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1758191589656-3c1668cb-54e5-4d6e-9044-a97cac24a31d.png)



## 12.网络空间搜索引擎
空间搜索引擎的原理：	收录依据基于ip与端口	仅收录根目录返回结果，二级目录不会收录（未解析到对应IP时），不进行目录扫描	针对防护后不进行收录

shodan：	www.shodan.io

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1758191847229-0e7085d1-5dbd-4acf-a273-b36c52ed8eb4.png)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1758193038219-fdecbb58-bd69-4182-a3b8-e0ffeba66b43.png)



fofa：	fofa.info

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1758193608598-b0dd2f66-c4dc-4ced-ade1-0e589931acf1.png)

示例：

log4j（组件框架 无明显特征）

fofa查找（可能）：	app=泛微-协同办公OA

JEECG

致远互联-FE

APACHE-shiro

有趣的fofa语法：

未授权访问摄像头：	app=webcamXP

被挂黑页的网站：	body=hacked by	查询被入侵被挂黑页的网站

机场登陆注册：	body=UA-111801619-3

一句话后门网站：	body=asp;.jpg		查询被别人上传一句话后门木马的网站

html明文显示的账密：body=admin&&body=123456&&title=登录	查询账号是admin密码是123456的登陆网站

密码文件泄露：	(body=password.txt||body=密码.txt)&&title=index of

指挥系统后台：	title=指挥&&title=登录

路由器登录：		title==欢迎使用RippleOS	查找含有一定特征的路由器登陆页面

未授权burp：		title=Burp Suite&&body=Proxy History	查询到的ip与端口是部署在公网的bp，可把流量转到他们那里



IP聚合	帮助对目标进行一定的扫描



## 13.公网服务器的搭建及工具灯塔的部署
使用成熟的云来搭建云服务器

docker	快速拉取部署搭建

先下载docker

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1758207865673-3c755f66-81be-4099-8855-b13014706305.png)

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1758207045821-aece272c-33f7-4b96-9eea-f788c57ea625.png)

docker volume create arl_db	创建灯塔数据卷

pull命令将镜像从docker仓库拉下来 up -d启动

搭建部署完成后在github查看端口，默认用户名密码	部署在公网要修改



公网服务器 安全组：默认不允许其他端口访问

在云的控制台进行修改	

 推荐github环境搭建工具f8x



poc	漏洞概念验证程序

f8x 快速部署工具		可快速部署大部分环境	项目在github上

水泽  工具

## 14.小程序 APP
小程序信息收集：通过BP抓包	分析通信地址

APP：

知道企业信息去查APP	爱企查、小蓝本、七麦数据等企业信息收集时直接查找

知道URL查找APP		通过URL的备案号去查找企业app

直接有APP				直接上，bp抓包



工具推荐： APPinfoScanner	在github

[AppInfoScanner_V1.0.9_Releases.zip](https://www.yuque.com/attachments/yuque/0/2025/zip/59258918/1758721535579-0552ad03-2777-49d7-9229-cf0606c8eac0.zip)

使用方法也在GitHub上面有

对本地的进行扫描

![](https://cdn.nlark.com/yuque/0/2025/png/59258918/1758721799648-6f02237a-45e7-490b-8b6d-4bd33cc7409d.png)



在线网站推荐：[https://www.zhihuaspace.cn:8888/](https://www.zhihuaspace.cn:8888/)  




